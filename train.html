<!DOCTYPE html>
<html>
<head>
    <title>GAME</title>
    <link rel="stylesheet" href="maintrain.css"/>
</head>
<body "onload=script();">
    <canvas id="myCanvas" width="1350" height="580"></canvas>
    <script  type="text/javascript">
        var canvas = document.getElementById('myCanvas');
        var context = canvas.getContext('2d');
        var count = 0;
        var gravity=0.009;
        var speed=0;
        
document.firstElementChild.style.zoom = "reset";



        context.beginPath();
        context.moveTo(0,0);
        context.lineTo(canvas.width,0);
        context.stroke();
        context.closePath();
        context.beginPath();
        context.moveTo(0,canvas.height);
        context.lineTo(canvas.width,canvas.height);
        context.stroke();
        context.closePath();
bird=
        {
            x:20,
            y:canvas.height/2,
            vx:0.1,
            vy:0,
            rad:15
        };
var a=[];
for(var i=0;i<150;i++)
{
a.push(Math.random());
if(i==0){a[i]=0.5;}
if(i!=0 && (a[i]-a[i-1]>0.6 || a[i-1]-a[i]>0.6 )){a[i]=a[i-1]+0.1;}
if(a[i]>=.8){a[i]=a[i]/2;}  
}
var stelac = [];
        var stagm =[];
        rectana=
{
x:50
};stelac.push(rectana);
rectanb=
{
x:50
};stagm.push(rectanb);
for(var i=0;i<150;i++)
{
    rectana=
        {
            x:500+stelac[i].x,
            vx:-.4,
            vy:.1,
            h:a[i]*canvas.height,
            y:a[i]*canvas.height/2,
            w:100
        };
        stelac.push(rectana);
        rectanb=
        {
            x:500+stagm[i].x,
            vx:-.4,
            vy:0,
            h:canvas.height-stelac[i+1].h-116,
            y:canvas.height-(canvas.height-stelac[i+1].h-116)/2,
            w:100
        };
        stagm.push(rectanb);
}
document.onkeydown = function(e) {
    switch (e.keyCode) {
        
        case 38:
            bird.y-=40;
            break;
        case 40:
            bird.y+=40;
            break;
        case 39:
            speed++;

            }




        };           

        
// start();      
birdMove();  

function birdMove()
        {   
                
            context.clearRect(0,1,canvas.width,canvas.height-2);// clearing only the inside of rect and not the boundary
            context.beginPath(); // drawing the main circle
            context.arc(bird.x,bird.y,bird.rad,0,2*Math.PI,true);
            context.fillStyle = "white"; // setting colour
            context.fill();
            context.closePath();

            
            var counter=0;

                for(var j=0;j<150;j++)
                {   
                    if(stagm[j].x<=0)
                    {
                        counter++;
                    }
                }
                context.font = "50px Arial";
                context.fillStyle = "white";
            
            context.fillText(counter,50,50);



            
            if(bird.y-bird.rad<=0 || bird.y+bird.rad>=canvas.height)
            {   sleep(400);
                context.clearRect(0,1,canvas.width,canvas.height-2);
                context.font = "250px Arial";
                context.fillStyle = "white";
            
            context.fillText(counter,3*canvas.width/8,canvas.height/2);
             context.font = "50px Arial";
                context.fillStyle = "white";
                context.fillText("it is a wreck!",3*canvas.width/8,canvas.height/2+60);
            birdMove.stop();



            }

            var d=[];
            var e=[];
            var f=[];
            var g=[];

            for(var j=1;j<150;j++)
            {
            context.beginPath(); // drawing the main circle
            context.rect(stelac[j].x-50,0,100,stelac[j].h);
            context.fillStyle = "purple"; // setting colour
            context.fill();
            context.rect(stagm[j].x-50,stagm[j].y-(stagm[j].h/2),100,stagm[j].h);
            context.fillStyle = "purple"; // setting colour
            context.fill();
            context.closePath();
            stelac[j].x-=4;
            stagm[j].x-=4;
            d.push(bird.x+bird.rad-stelac[j].x+50);
            e.push(bird.y+bird.rad-stagm[j].y+stagm[j].h/2);
            f.push(bird.x-bird.rad-stelac[j].x-50);
            g.push(bird.y-bird.rad-stelac[j].y-stelac[j].h/2);
            


                }
                
                for(var j=0;j<150;j+=1)
                {
                if(g[j]<=0 && d[j]>=0 && f[j]<=0)
                {   sleep(400);
                    context.clearRect(0,1,canvas.width,canvas.height-2);
                context.font = "250px Arial";
                context.fillStyle = "white";
            
            context.fillText(counter,3*canvas.width/8,canvas.height/2);
            context.font = "50px Arial";
                context.fillStyle = "white";
                context.fillText("it is a wreck!",3*canvas.width/8,canvas.height/2+60);
                birdMove.stop();
                } 
                }

                for(var j=0;j<150;j+=1)
                {
                if(e[j]>=0 && d[j]>=0 && f[j]<=0)
                {   sleep(400);
                    context.clearRect(0,1,canvas.width,canvas.height-2);
                context.font = "250px Arial";
                context.fillStyle = "white";
            
            context.fillText(counter,3*canvas.width/8,canvas.height/2);
                context.font = "50px Arial";
                context.fillStyle = "white";
                context.fillText("it is a wreck!",3*canvas.width/8,canvas.height/2+60);
                    birdMove.stop();
                } 
                }
                
            
            animate = setTimeout(birdMove,1000/(125+speed));// drawing 60 times every second, 1000 stands for 1000 ms
        }

function sleep(milliseconds) {
  var start = new Date().getTime();
  for (var i = 0; i < 1e7; i++) {
    if ((new Date().getTime() - start) > milliseconds){
      break;
    }
  }
}


function start()
{
    var timer=5;  
    var start = new Date().getTime();
for(timer=5;timer>=0;timer--)
{
  for (var i = 0; i < 1e7; i++) {
    context.clearRect(0,1,canvas.width,canvas.height-2);
    context.font = "250px Arial";
        context.fillStyle = "white";
            
            context.fillText(timer,3*canvas.width/8,canvas.height/2);

    if ((new Date().getTime() - start) > 1000){
      break;
    }
  }
  }      
        

}
           // animate = setTimeout(start,1000/(400));




</script>
    <div align="center">
        press up and down keys to moVe the ball and let it pass the rods
        <section id="aisehi"><a href="index.html"><div id="back">Click here to go Back to main page</div></a>
        
    </div>
</body>
</html>

